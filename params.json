{"name":"Truncate.js","tagline":"a jQuery plugin for deep-HTML truncation and toggling","body":"## Why use JavaScript to truncate text?\r\n\r\n1. Server-side text truncation based on character counts is always incorrect. The width of the character string \"iiiii\" is approximately 58% less than the width of \"MMMMM\" unless a monospace font is used. \r\n2. The CSS3 property \"text-overflow\" can only truncate a single line of text, and is not supported by IE7 and below.\r\n\r\n## Features\r\n\r\n1. HTML truncation to a specified number of lines, including HTML that wraps around other floated elements.\r\n2. Deep-HTML truncation with preservation of all non-type3 (text) nodes\r\n3. Optional specification of a truncation suffix, e.g. â€¦\r\n4. Toggling between truncated and un-truncated states with configurable hyperlink text\r\n5. Triggered events when the truncated state of the HTML is changed\r\n6. O(log n) execution time for n := text length\r\n7. Pre-truncation and re-truncation analyses are both performed on cloned elements to minimize DOM flicker\r\n8. Optional console logging of execution time and number of steps for performance analysis\r\n9. Ability to merge modifications to truncated HTML back into the original HTML\r\n\r\n## Usage\r\n\r\nInvocation\r\n```\r\n$('.selector').truncate(options);\r\n```\r\nEvent Binding (after invocation)\r\n```\r\n$('.selector').truncate('bind', 'show', function(){\r\n\t// do something when full text is shown\r\n});\r\n```\r\n### Events\r\nEvents are triggered on the following state changes of the selected element.  No events are triggered\r\non the initial invocation of the truncate plugin.  \r\n\r\n___\r\n`show` Triggered when full text is shown.  If [options.animate](#options_animate) is specified to be true, then this event will fire after the animation has completed.  \r\n___\r\n`hide` Triggered when full text is truncated.  If [options.animate](#options_animate) is specified to be true, then this event will fire after the animation has completed.  \r\n___\r\n`toggle` Triggered both when full text is shown and truncated.  If [options.animate](#options_animate) is specified to be true, then this event will fire after the animation has completed.\r\n\r\n### Options\r\n\r\nOptions are passed as a flat javascript object with the following allowed keys:\r\n___\r\n<a name=\"options_maxLines\"></a>\r\nThe maximum number of lines to display when the element is truncated.  \r\n\r\n    maxLines\r\n\r\n        Allowed Values: integer > 0\r\n        Default Value: 1\r\n___\r\n<a name=\"options_lineHeight\"></a>\r\nThe line-height value that should be used to calculate the vertical truncation point.  If unspecified, it will be calculated using the CSS value from each selected element.\r\n\r\n\tlineHeight\r\n\r\n\t\tAllowed Values: integer > 0\r\n\t\tDefault Value: null\r\n___\r\n<a name=\"options_truncateString\"></a>\r\nSuffix to append to truncated text. e.g. &nbsp;&#8230; (non-breaking space followed by an ellipsis).\r\n\ttruncateString\r\n\t\r\n\t\tAllowed Values: any string\r\n\t\tDefault Value: ''\r\n___\r\n<a name=\"options_truncateAfterLinks\"></a>\r\nIndicates whether [options.truncateString](#options_truncateString) should be appended after anchor tags when the truncation point occurs inside an anchor tag.  Since the truncateString is not part of the original anchor text, it is desirable to exclude it from the anchor tag.  In cases where anchor tags display as block, however, this can cause the truncateString to display on a line below the anchor tag.\r\n\r\n\ttruncateAfterLinks\r\n\t\r\n\t\tAllowed Values: true / false\r\n\t\tDefault Value: true\r\n___\r\n<a name=\"options_showText\"></a>\r\nIf specified, will be shown as a hyperlink appended to the truncated text.  When clicked, this link will toggle the truncated element to its full-text state. e.g. (\"more\")\r\n\r\n\tshowText\r\n\t\r\n\t\tAllowed Values: any string\r\n\t\tDefault Value: ''\r\n___\r\n<a name=\"options_hideText\"></a>\r\nIf specified, will be shown as a hyperlink appended to the full text.  When clicked, this link will toggle the full-text element to its truncated state.  e.g. (\"less\")\r\n\r\n\thideText \r\n\t\r\n\t\tAllowed Values: any string\r\n\t\tDefault Value: ''\r\n___\r\n<a name=\"options_collapsed\"></a>\r\nIndicates whether the truncated element should be initially displayed in a full-text or truncated state.\r\n\r\n\tcollapsed\r\n\t\r\n\t\tAllowed Values: true / false\r\n\t\tDefault Value: true\r\n___\r\n<a name=\"options_debug\"></a>\r\nIndicates whether messages should be written to console.log including the truncation execution time and number of binary search steps used to truncate the full text.  The usage of console.log in this plugin is always safe for inclusion in IE.\r\n\r\n\tdebug\r\n\t\r\n\t\tAllowed Values: true / false\r\n\t\tDefault Value: false\r\n___\r\n<a name=\"options_contextParent\"></a>\r\nA parent DOM element to use as the cloned element for measuring height of the cloned text.  This is necessary when the text node can have its text displaced by floated elements inside a common parent.\r\n\r\n\tcontextParent\r\n\t\r\n\t\tAllowed Values: jQuery object\r\n\t\tDefault Value: null\r\n___\r\n<a name=\"options_tooltip\"></a>\r\nIndicates whether the original TEXT content should be set in a title attribute on the truncated element.  This will strip all HTML for compatibility with HTML attribute syntax.\r\n\r\n\ttooltip\r\n\t\r\n\t\tAllowed Values: true / false\r\n\t\tDefault Value: false\r\n___\r\n<a name=\"options_animate\"></a>\r\nIndicates whether the user-initiated transitions between truncated and full text should animate the height.\r\n\r\n\tanimate\r\n\t\r\n\t\tAllowed Values: true / false\r\n\t\tDefault Value: false\r\n___\r\n<a name=\"options_animateOptions\"></a>\r\nIf specified, will be passed into jQuery's $.fn.animate options parameter.\r\n\r\n\tanimateOptions\r\n\t\r\n\t\tAllowed Values: object\r\n\t\tDefault Value: empty object\r\n\r\n### Methods\r\n\r\nMethods are invoked via $('.selector').truncate(methodName, arguments...)\r\n___\r\n`options` Pass an object argument to reset the options.  This does not immediately trigger an updated truncation.\r\n___\r\n`update` Takes an optional second argument to pass new HTML.  With or without the argument, the original truncated element will be re-truncated.  This is useful to hook into a callback when the truncated element can be subject to re-sizing (i.e. responsive design).  If no HTML is passed, but the contents of the truncated text have been modified, the modified text will be used in place of the original.\r\n\r\n### Examples\r\n\r\nTruncate to 3 lines with a trailing ellipsis, \"Read More\" text when collapsed, and no hide text.\r\n```\r\n$('.selector').truncate({\r\n    'maxLines': 3,\r\n    'truncateString': '&nbsp;&#8230;',\r\n    'showText': 'Read More'\r\n});\r\n```\r\n___\r\nTruncate to 3 lines with a trailing ellipsis, relative to a context parent that includes a floated image.\r\n```\r\nvar $el = $('.selector');\r\nvar $contextParent = $el.closest('.parent-selector');\r\n\r\n$('.selector').truncate({\r\n    'maxLines': 3,\r\n    'truncateString': '&nbsp;&#8230;',\r\n    'contextParent': $contextParent\r\n});\r\n```\r\n\r\n### Known Issues\r\n\r\n- Truncating HTML without consideration for the timing of web font loading will produce incorrectly truncated text. In cases where web fonts are used, either delay truncation until after the web fonts are loaded or call the \"update\" method after the web fonts have loaded.  [FontSpy](https://github.com/patrickmarabeas/jQuery-FontSpy.js) is a good plugin for detecting when an external font has been loaded.  It is based on [Remy Sharp's usage of Comic Sans for determining whether a named font is loaded](https://remysharp.com/2008/07/08/how-to-detect-if-a-font-is-installed-only-using-javascript)\r\n\r\n- The \"update\" method with 0 parameters will fail to recognize a change in the truncated HTML if the HTML length is the same as before the change was made.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}